{# login.html #}
{% extends 'base.html' %}

{% block title %}Вход{% endblock %}

{% block body_class %}page-login{% endblock %}

{% block content %}

    <div class="container"> {# Этот контейнер был внутри main в вашем старом коде #}
        <h1>Вход</h1>

        {# Форма отправляется на текущий URL ('/login') методом POST #}
         {# query string 'next' передается автоматически Flask-Login после перенаправления на страницу логина из-за @login_required #}
        <form method="post" class="form-control" style="padding: 20px; background-color: rgba(255, 255, 255, 0.1); border: 1px solid #ccc; border-radius:4px;  max-width: 400px; margin: 20px auto; color: #fff;">
            <div class="mb-3">
                <label for="usernameInput" class="form-label" style="color: #fff;">Имя пользователя</label>
                 {# value={{ username or '' }} сохранит введенное значение при ошибке #}
                <input type="text" name="username" id="usernameInput" placeholder="Введите имя пользователя" class="form-control" value="{{ username or '' }}" required>
            </div>
            <div class="mb-3">
                <label for="passwordInput" class="form-label" style="color: #fff;">Пароль</label>
                {# Используем input-group для размещения кнопки рядом с полем ввода #}
                <div class="input-group" >
                    <input type="password" name="password" id="passwordInput" placeholder="Введите пароль" class="form-control" required>
                    {# Кнопка для переключения типа поля ввода #}
                    <button class="btn btn-outline-secondary" type="button" id="togglePassword" style="background-color: rgba(255, 255, 255, 0.1); border: 1px solid #ccc; border-radius:4px; color: #fff;">
                        show {# Начальный текст кнопки #}
                    </button>
                </div>
            </div>

<button class="btn btn-primary" type="submit">Войти</button>

</form>
    </div>

    {# --- JavaScript для переключения видимости пароля --- #}
    <script>
        // Получаем ссылки на кнопку и поле ввода пароля по их ID
        const togglePasswordButton = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('passwordInput');

        // Добавляем слушатель события клика на кнопку
        togglePasswordButton.addEventListener('click', function () {
            // Проверяем текущий тип поля ввода
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';

            // Переключаем тип поля ввода
            passwordInput.setAttribute('type', type);

            // Меняем текст на кнопке в зависимости от нового типа поля
            if (type === 'password') {
                this.textContent = 'show';
            } else {
                this.textContent = 'hide';
            }
        });
    </script>
{% endblock %}